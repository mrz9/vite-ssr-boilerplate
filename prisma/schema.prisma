datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

// 管理员 表
model User {
    id          Int       @id @default(autoincrement())
    name        String
    salt        String
    type        Int
    status      Int
    password    String
    createTime  DateTime  @default(now())
    updatedTime DateTime
    News        News[]
    Faq         Faq[]
    Pages       Pages[]
    Version     Version[]
}

// 新闻表
model News {
    id          Int      @id @default(autoincrement())
    isTop       Boolean  @default(false)
    title_zh    String
    title_km    String
    title_en    String
    content_zh  String   @db.Text
    content_km  String   @db.Text
    content_en  String   @db.Text
    status      Int
    author      User     @relation(fields: [createBy], references: [id])
    createBy    Int
    createTime  DateTime @default(now())
    updatedTime DateTime

}

// 问答表
model Faq {
    id          Int      @id @default(autoincrement())
    title_zh    String
    title_km    String
    title_en    String
    content_zh  String   @db.Text
    content_km  String   @db.Text
    content_en  String   @db.Text
    status      Int
    sort        Int
    author      User     @relation(fields: [createBy], references: [id])
    createBy    Int
    createTime  DateTime @default(now())
    updatedTime DateTime
}

// 专题页面表
model Pages {
    id          Int       @id @default(autoincrement())
    type        PagesType @unique
    content_zh  String    @db.Text
    content_km  String    @db.Text
    content_en  String    @db.Text
    status      Int
    author      User      @relation(fields: [createBy], references: [id])
    createBy    Int
    createTime  DateTime  @default(now())
    updatedTime DateTime
}

// 版本表
model Version {
    id           Int      @id @default(autoincrement())
    os           AppOS
    version      String
    title_zh     String
    title_km     String
    title_en     String
    download_url String
    author       User     @relation(fields: [createBy], references: [id])
    createBy     Int
    createTime   DateTime @default(now())
    updatedTime  DateTime

    @@unique([os, version], name: "os_version")
}

// 下载记录
model DownloadLog {
    id           Int      @id @default(autoincrement())
    os           AppOS
    version      String
    ip           String
    country      String
    countryShort String
    region       String
    city         String
    createTime   DateTime @default(now())
}

enum PagesType {
    about
}

enum NewsStatus {
    draft    @map("0")
    publish  @map("1")
}

enum FaqStatus {
    draft    @map("0")
    publish  @map("1")
}

enum AppOS {
    ios
    android
}
